/**
 *! Vecti | Vector Image for Web Vector
 * v0.0.4
 * @Creator : Habib Rohman
 * @Date : 17 Agustus 2016
 */
!function(t){"use strict";window.Vecti=function(e){var a=this,r=new Error;a.db="",a.params={tagName:"icon",attributeName:"data",size:32,dataType:"json",fill:"#000000",stroke:"none",dataUrl:"dist/json/data.json"};for(var i in e)a.params[i]=e[i];a.init=function(t){switch(a.params.dataType){case"json":a.getJSONData(function(e){a.generateSVG(e,function(e){a.replaceSVG(e),t(e)})});break;default:throw r.message="Data type not supported"}},a.decodeHTML=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},a.getJSONData=function(e){var r=a.params.dataUrl;if(t.XMLHttpRequest){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=i.responseText;"object"!=typeof t&&(t=JSON.parse(t)),e(t)}},i.open("GET",r),i.send()}},a.countJSON=function(t){var e=0;for(var a in t)++e;return e},a.generateSVG=function(t,e){var r,i=0,n="",s=a.countJSON(t);for(r in t){++i;var o,u=new DOMParser;o=u.parseFromString(a.decodeHTML(t[r].code),"text/xml").firstChild;var d=a.params.size||32,c=a.params.fill||"#000000",l=a.params.stroke||"none";o.setAttribute("width",d),o.setAttribute("height",d),o.setAttribute("fill",c),o.setAttribute("stroke",l);var p,f=a.htmlEntities(o.outerHTML),m=",";i==s&&(m=""),p='"'+r+'":{ "code":"'+f+'"}'+m,n+=p}var g=JSON.parse("{"+n+"}");return a.db=g,e?(e(g),!1):g},a.replaceSVG=function(t,e){var i=document.getElementsByTagName(a.params.tagName);if(i.length>0)for(var n=i.length-1;n>-1;){var s,o=i[n].getAttribute(a.params.attributeName).toLowerCase(),u=new DOMParser;if(void 0!=t[o]){var d=this.decodeHTML(t[o].code);if(s=u.parseFromString(d,"text/xml").firstChild,void 0==o)throw r.message="Undefined. can't found tag name";var c=a.params.size,l=a.params.fill,p=a.params.stroke,f=i[n].getAttribute("size"),m=i[n].getAttribute("fill"),g=i[n].getAttribute("stroke");void 0!=f&&""!=f&&(c=f),void 0!=m&&""!=m&&(l=m),void 0!=g&&""!=g&&(p=g),s.setAttribute("width",c),s.setAttribute("height",c),s.setAttribute("fill",l),s.setAttribute("stroke",p),i[n].parentElement.replaceChild(s,i[n]),n--}else n--}},a.getDatas=function(t){return t?this.decodeHTML(a.db):a.db},a.htmlEntities=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}}(window);